-- ---------------------------------Q1
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = off; SET enable_indexscan = on;
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
EXPLAIN ANALYZE SELECT * FROM r WHERE b=9;
                                                      QUERY PLAN                                                       
-----------------------------------------------------------------------------------------------------------------------
 Index Scan using b_idx on r  (cost=0.42..29956.05 rows=22715 width=32) (actual time=0.177..68.692 rows=10000 loops=1)
   Index Cond: (b = 9)
 Planning time: 17.216 ms
 Execution time: 70.959 ms
(4 rows)

SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           5468 |             0 |            34 |            0
(1 row)

-- ---------------------------------Q1
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = on; SET enable_indexscan = off; 
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
EXPLAIN ANALYZE SELECT * FROM r WHERE b=9;
                                                       QUERY PLAN                                                       
------------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on r  (cost=428.47..8065.40 rows=22715 width=32) (actual time=7.390..58.389 rows=10000 loops=1)
   Recheck Cond: (b = 9)
   Heap Blocks: exact=5468
   ->  Bitmap Index Scan on b_idx  (cost=0.00..422.79 rows=22715 width=0) (actual time=5.113..5.113 rows=10000 loops=1)
         Index Cond: (b = 9)
 Planning time: 0.202 ms
 Execution time: 60.423 ms
(7 rows)

SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           5468 |             0 |            30 |            0
(1 row)

-- ---------------------------------Q2
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = on; SET enable_indexscan = off; 
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index c_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE c=10;
                                                         QUERY PLAN                                                         
----------------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on r  (cost=1159.92..9137.92 rows=50000 width=32) (actual time=29.445..122.831 rows=50000 loops=1)
   Recheck Cond: (c = 10)
   Heap Blocks: exact=7346
   ->  Bitmap Index Scan on cb_idx  (cost=0.00..1147.42 rows=50000 width=0) (actual time=26.262..26.262 rows=50000 loops=1)
         Index Cond: (c = 10)
 Planning time: 0.544 ms
 Execution time: 131.745 ms
(7 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7346 |             0 |           195 |            0
(1 row)

-- ---------------------------------Q2
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = off; SET enable_indexscan = on; 
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index c_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE c=10;
                                                       QUERY PLAN                                                        
-------------------------------------------------------------------------------------------------------------------------
 Index Scan using cb_idx on r  (cost=0.42..31025.14 rows=50000 width=32) (actual time=0.072..144.072 rows=50000 loops=1)
   Index Cond: (c = 10)
 Planning time: 0.563 ms
 Execution time: 153.595 ms
(4 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7346 |         33566 |           195 |            0
(1 row)

-- ---------------------------------Q3
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = on; SET enable_indexscan = off; 
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
EXPLAIN ANALYZE SELECT b FROM r WHERE b>9;
                                                           QUERY PLAN                                                           
--------------------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on r  (cost=10712.80..25214.81 rows=571920 width=8) (actual time=199.038..597.982 rows=570000 loops=1)
   Recheck Cond: (b > 9)
   Heap Blocks: exact=7353
   ->  Bitmap Index Scan on b_idx  (cost=0.00..10569.82 rows=571920 width=0) (actual time=195.839..195.839 rows=570000 loops=1)
         Index Cond: (b > 9)
 Planning time: 1.339 ms
 Execution time: 699.162 ms
(7 rows)

SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7353 |             0 |          1562 |            0
(1 row)

-- ---------------------------------Q3
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = off; SET enable_indexscan = off; 
SET
SET
SET enable_indexonlyscan = on; SET enable_seqscan = off;
SET
SET
EXPLAIN ANALYZE SELECT b FROM r WHERE b>9;
                                                                  QUERY PLAN                                                                  
----------------------------------------------------------------------------------------------------------------------------------------------
 Index Only Scan using b_idx on r  (cost=10000000000.42..10000016289.02 rows=571920 width=8) (actual time=1.145..328.678 rows=570000 loops=1)
   Index Cond: (b > 9)
   Heap Fetches: 0
 Planning time: 0.187 ms
 Execution time: 425.515 ms
(5 rows)

SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |              1 |             0 |          1561 |            0
(1 row)

-- ---------------------------------Q3
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = off; SET enable_indexscan = on; 
SET
SET
SET enable_indexonlyscan = on; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index b_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT b FROM r WHERE b>9;
                                                          QUERY PLAN                                                           
-------------------------------------------------------------------------------------------------------------------------------
 Index Only Scan using cb_idx on r  (cost=0.42..28631.62 rows=571920 width=8) (actual time=3.852..463.576 rows=570000 loops=1)
   Index Cond: (b > 9)
   Heap Fetches: 0
 Planning time: 0.548 ms
 Execution time: 565.702 ms
(5 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |              1 |             0 |          3834 |            0
(1 row)

-- ---------------------------------Q4
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = on; SET enable_indexscan = off; 
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
EXPLAIN ANALYZE SELECT * FROM r WHERE b=9 AND c=10;
                                                     QUERY PLAN                                                      
---------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on r  (cost=32.07..3070.25 rows=1136 width=32) (actual time=0.754..6.661 rows=449 loops=1)
   Recheck Cond: ((c = 10) AND (b = 9))
   Heap Blocks: exact=431
   ->  Bitmap Index Scan on cb_idx  (cost=0.00..31.79 rows=1136 width=0) (actual time=0.487..0.487 rows=449 loops=1)
         Index Cond: ((c = 10) AND (b = 9))
 Planning time: 1.135 ms
 Execution time: 6.903 ms
(7 rows)

SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |            431 |             0 |             5 |            0
(1 row)

-- ---------------------------------Q4
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = on; SET enable_indexscan = off; 
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index cb_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE b=9 AND c=10;
                                                           QUERY PLAN                                                           
--------------------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on r  (cost=1351.03..4389.21 rows=1136 width=32) (actual time=32.018..35.847 rows=449 loops=1)
   Recheck Cond: ((b = 9) AND (c = 10))
   Heap Blocks: exact=431
   ->  BitmapAnd  (cost=1351.03..1351.03 rows=1136 width=0) (actual time=31.827..31.827 rows=0 loops=1)
         ->  Bitmap Index Scan on b_idx  (cost=0.00..422.79 rows=22715 width=0) (actual time=8.039..8.039 rows=10000 loops=1)
               Index Cond: (b = 9)
         ->  Bitmap Index Scan on c_idx  (cost=0.00..927.42 rows=50000 width=0) (actual time=21.166..21.166 rows=50000 loops=1)
               Index Cond: (c = 10)
 Planning time: 0.612 ms
 Execution time: 36.034 ms
(10 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |            431 |             0 |           169 |            0
(1 row)

-- ---------------------------------Q5
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = off; SET enable_indexscan = on; 
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index cb_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE b=9 AND c>0;
                                                      QUERY PLAN                                                      
----------------------------------------------------------------------------------------------------------------------
 Index Scan using b_idx on r  (cost=0.42..30012.84 rows=22715 width=32) (actual time=0.080..54.497 rows=9524 loops=1)
   Index Cond: (b = 9)
   Filter: (c > 0)
   Rows Removed by Filter: 476
 Planning time: 0.810 ms
 Execution time: 56.767 ms
(6 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           5468 |             1 |            33 |            0
(1 row)

-- ---------------------------------Q5
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = on; SET enable_indexscan = off;
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index b_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE b=9 AND c>0;
                                                          QUERY PLAN                                                          
------------------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on r  (cost=25418.10..33111.83 rows=22715 width=32) (actual time=142.251..192.253 rows=9524 loops=1)
   Recheck Cond: ((c > 0) AND (b = 9))
   Heap Blocks: exact=5346
   ->  Bitmap Index Scan on cb_idx  (cost=0.00..25412.42 rows=22715 width=0) (actual time=139.661..139.661 rows=9524 loops=1)
         Index Cond: ((c > 0) AND (b = 9))
 Planning time: 1.409 ms
 Execution time: 194.372 ms
(7 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           5346 |             1 |          3645 |            2
(1 row)

-- ---------------------------------Q6
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = off; SET enable_indexscan = on;
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index cb_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE b>9 AND c=10;
                                                       QUERY PLAN                                                       
------------------------------------------------------------------------------------------------------------------------
 Index Scan using c_idx on r  (cost=0.42..30903.48 rows=28596 width=32) (actual time=0.133..100.625 rows=28544 loops=1)
   Index Cond: (c = 10)
   Filter: (b > 9)
   Rows Removed by Filter: 21456
 Planning time: 1.276 ms
 Execution time: 106.063 ms
(6 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7346 |             0 |           140 |            0
(1 row)

-- ---------------------------------Q6
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = on; SET enable_indexscan = off;
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index cb_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE b>9 AND c=10;
                                                        QUERY PLAN                                                        
--------------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on r  (cost=934.57..9037.57 rows=28596 width=32) (actual time=26.475..122.467 rows=28544 loops=1)
   Recheck Cond: (c = 10)
   Filter: (b > 9)
   Rows Removed by Filter: 21456
   Heap Blocks: exact=7346
   ->  Bitmap Index Scan on c_idx  (cost=0.00..927.42 rows=50000 width=0) (actual time=23.288..23.288 rows=50000 loops=1)
         Index Cond: (c = 10)
 Planning time: 0.876 ms
 Execution time: 127.855 ms
(9 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7346 |             0 |           139 |            0
(1 row)

-- ---------------------------------Q6
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = off; SET enable_indexscan = on;
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index cb_idx;
DROP INDEX
DROP index c_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE b>9 AND c=10;
                                                       QUERY PLAN                                                       
------------------------------------------------------------------------------------------------------------------------
 Index Scan using b_idx on r  (cost=0.42..47039.56 rows=28596 width=32) (actual time=0.118..754.200 rows=28544 loops=1)
   Index Cond: (b > 9)
   Filter: (c = 10)
   Rows Removed by Filter: 541456
 Planning time: 0.830 ms
 Execution time: 759.729 ms
(6 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7353 |        128087 |          1561 |            0
(1 row)

-- ---------------------------------Q6
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = on; SET enable_indexscan = off;
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index cb_idx;
DROP INDEX
DROP index c_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE b>9 AND c=10;
                                                           QUERY PLAN                                                           
--------------------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on r  (cost=10576.97..26508.77 rows=28596 width=32) (actual time=196.987..561.528 rows=28544 loops=1)
   Recheck Cond: (b > 9)
   Filter: (c = 10)
   Rows Removed by Filter: 541456
   Heap Blocks: exact=7353
   ->  Bitmap Index Scan on b_idx  (cost=0.00..10569.82 rows=571920 width=0) (actual time=193.779..193.779 rows=570000 loops=1)
         Index Cond: (b > 9)
 Planning time: 0.824 ms
 Execution time: 567.030 ms
(9 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7353 |             0 |          1561 |            0
(1 row)

-- ---------------------------------Q6
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = off; SET enable_indexscan = on;
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index cb_idx;
DROP INDEX
DROP index b_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE b>9 AND c=10;
                                                       QUERY PLAN                                                       
------------------------------------------------------------------------------------------------------------------------
 Index Scan using c_idx on r  (cost=0.42..30903.48 rows=28596 width=32) (actual time=0.113..101.410 rows=28544 loops=1)
   Index Cond: (c = 10)
   Filter: (b > 9)
   Rows Removed by Filter: 21456
 Planning time: 1.247 ms
 Execution time: 106.871 ms
(6 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7346 |             0 |           140 |            0
(1 row)

-- ---------------------------------Q6
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = on; SET enable_indexscan = off;
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index cb_idx;
DROP INDEX
DROP index b_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE b>9 AND c=10;
                                                        QUERY PLAN                                                        
--------------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on r  (cost=934.57..9037.57 rows=28596 width=32) (actual time=21.586..117.954 rows=28544 loops=1)
   Recheck Cond: (c = 10)
   Filter: (b > 9)
   Rows Removed by Filter: 21456
   Heap Blocks: exact=7346
   ->  Bitmap Index Scan on c_idx  (cost=0.00..927.42 rows=50000 width=0) (actual time=18.438..18.438 rows=50000 loops=1)
         Index Cond: (c = 10)
 Planning time: 0.710 ms
 Execution time: 123.231 ms
(9 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7346 |             0 |           139 |            0
(1 row)

-- ---------------------------------Q6
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = off; SET enable_indexscan = on;
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index b_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE b>9 AND c=10;
                                                       QUERY PLAN                                                        
-------------------------------------------------------------------------------------------------------------------------
 Index Scan using cb_idx on r  (cost=0.42..30393.88 rows=28596 width=32) (actual time=0.071..107.301 rows=28544 loops=1)
   Index Cond: ((c = 10) AND (b > 9))
 Planning time: 1.565 ms
 Execution time: 112.899 ms
(4 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7208 |         17834 |           114 |            0
(1 row)

-- ---------------------------------Q6
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = on; SET enable_indexscan = off;
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index b_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE b>9 AND c=10;
                                                        QUERY PLAN                                                         
---------------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on r  (cost=737.53..8519.47 rows=28596 width=32) (actual time=22.136..97.502 rows=28544 loops=1)
   Recheck Cond: ((c = 10) AND (b > 9))
   Heap Blocks: exact=7208
   ->  Bitmap Index Scan on cb_idx  (cost=0.00..730.38 rows=28596 width=0) (actual time=19.003..19.003 rows=28544 loops=1)
         Index Cond: ((c = 10) AND (b > 9))
 Planning time: 0.655 ms
 Execution time: 103.310 ms
(7 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7208 |             0 |           113 |            0
(1 row)

-- ---------------------------------Q6
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = off; SET enable_indexscan = on;
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index c_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE b>9 AND c=10;
                                                       QUERY PLAN                                                        
-------------------------------------------------------------------------------------------------------------------------
 Index Scan using cb_idx on r  (cost=0.42..30393.88 rows=28596 width=32) (actual time=0.077..107.715 rows=28544 loops=1)
   Index Cond: ((c = 10) AND (b > 9))
 Planning time: 1.109 ms
 Execution time: 113.299 ms
(4 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7208 |         17834 |           114 |            0
(1 row)

-- ---------------------------------Q6
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = on; SET enable_indexscan = off;
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index c_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE b>9 AND c=10;
                                                        QUERY PLAN                                                         
---------------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on r  (cost=737.53..8519.47 rows=28596 width=32) (actual time=22.037..96.589 rows=28544 loops=1)
   Recheck Cond: ((c = 10) AND (b > 9))
   Heap Blocks: exact=7208
   ->  Bitmap Index Scan on cb_idx  (cost=0.00..730.38 rows=28596 width=0) (actual time=18.917..18.917 rows=28544 loops=1)
         Index Cond: ((c = 10) AND (b > 9))
 Planning time: 0.864 ms
 Execution time: 102.269 ms
(7 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7208 |             0 |           113 |            0
(1 row)

-- ---------------------------------Q6
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = off; SET enable_indexscan = off;
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = on;
SET
SET
EXPLAIN ANALYZE SELECT * FROM r WHERE b>9 AND c=10;
                                                QUERY PLAN                                                
----------------------------------------------------------------------------------------------------------
 Seq Scan on r  (cost=0.00..22353.00 rows=28596 width=32) (actual time=0.054..538.553 rows=28544 loops=1)
   Filter: ((b > 9) AND (c = 10))
   Rows Removed by Filter: 971456
 Planning time: 1.358 ms
 Execution time: 544.014 ms
(5 rows)

SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7353 |             0 |             1 |            0
(1 row)

-----------------------------------End of file
