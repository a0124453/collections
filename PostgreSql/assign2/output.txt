-- ---------------------------------Q1
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = on; SET enable_indexscan = off;
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
EXPLAIN ANALYZE SELECT * FROM r WHERE b=9;
                                                       QUERY PLAN                                                       
------------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on r  (cost=428.47..8065.40 rows=22715 width=32) (actual time=12.722..105.329 rows=10000 loops=1)
   Recheck Cond: (b = 9)
   Heap Blocks: exact=5468
   ->  Bitmap Index Scan on b_idx  (cost=0.00..422.79 rows=22715 width=0) (actual time=8.723..8.723 rows=10000 loops=1)
         Index Cond: (b = 9)
 Planning time: 13.209 ms
 Execution time: 107.629 ms
(7 rows)

SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           5468 |             0 |            34 |            0
(1 row)

-- ---------------------------------Q1
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = off; SET enable_indexscan = on; 
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
EXPLAIN ANALYZE SELECT * FROM r WHERE b=9;
                                                      QUERY PLAN                                                       
-----------------------------------------------------------------------------------------------------------------------
 Index Scan using b_idx on r  (cost=0.42..29956.05 rows=22715 width=32) (actual time=0.092..44.228 rows=10000 loops=1)
   Index Cond: (b = 9)
 Planning time: 0.196 ms
 Execution time: 46.306 ms
(4 rows)

SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           5468 |             0 |            30 |            0
(1 row)

-- ---------------------------------Q2
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = on; SET enable_indexscan = off; 
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index c_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE c=10;
                                                         QUERY PLAN                                                         
----------------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on r  (cost=1159.92..9137.92 rows=50000 width=32) (actual time=29.548..134.156 rows=50000 loops=1)
   Recheck Cond: (c = 10)
   Heap Blocks: exact=7346
   ->  Bitmap Index Scan on cb_idx  (cost=0.00..1147.42 rows=50000 width=0) (actual time=26.207..26.207 rows=50000 loops=1)
         Index Cond: (c = 10)
 Planning time: 0.538 ms
 Execution time: 143.685 ms
(7 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7346 |             0 |           195 |            0
(1 row)

-- ---------------------------------Q2
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = off; SET enable_indexscan = on; 
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index c_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE c=10;
                                                       QUERY PLAN                                                        
-------------------------------------------------------------------------------------------------------------------------
 Index Scan using cb_idx on r  (cost=0.42..31025.14 rows=50000 width=32) (actual time=0.070..147.419 rows=50000 loops=1)
   Index Cond: (c = 10)
 Planning time: 0.525 ms
 Execution time: 157.179 ms
(4 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7346 |         33566 |           195 |            0
(1 row)

-- ---------------------------------Q3
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = on; SET enable_indexscan = off; 
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
EXPLAIN ANALYZE SELECT b FROM r WHERE b>9;
                                                           QUERY PLAN                                                           
--------------------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on r  (cost=10712.80..25214.81 rows=571920 width=8) (actual time=200.994..600.210 rows=570000 loops=1)
   Recheck Cond: (b > 9)
   Heap Blocks: exact=7353
   ->  Bitmap Index Scan on b_idx  (cost=0.00..10569.82 rows=571920 width=0) (actual time=197.819..197.819 rows=570000 loops=1)
         Index Cond: (b > 9)
 Planning time: 1.090 ms
 Execution time: 697.981 ms
(7 rows)

SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7353 |             0 |          1562 |            0
(1 row)

-- ---------------------------------Q3
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = off; SET enable_indexscan = off; 
SET
SET
SET enable_indexonlyscan = on; SET enable_seqscan = off;
SET
SET
EXPLAIN ANALYZE SELECT b FROM r WHERE b>9;
                                                                  QUERY PLAN                                                                  
----------------------------------------------------------------------------------------------------------------------------------------------
 Index Only Scan using b_idx on r  (cost=10000000000.42..10000016289.02 rows=571920 width=8) (actual time=0.907..331.784 rows=570000 loops=1)
   Index Cond: (b > 9)
   Heap Fetches: 0
 Planning time: 0.190 ms
 Execution time: 435.480 ms
(5 rows)

SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |              1 |             0 |          1561 |            0
(1 row)

-- ---------------------------------Q3
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = off; SET enable_indexscan = off; 
SET
SET
SET enable_indexonlyscan = on; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index b_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT b FROM r WHERE b>9;
                                                        QUERY PLAN                                                         
---------------------------------------------------------------------------------------------------------------------------
 Seq Scan on r  (cost=10000000000.00..10000019853.00 rows=571920 width=8) (actual time=0.021..565.354 rows=570000 loops=1)
   Filter: (b > 9)
   Rows Removed by Filter: 430000
 Planning time: 0.691 ms
 Execution time: 661.593 ms
(5 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7353 |             0 |             0 |            0
(1 row)

-- ---------------------------------Q4
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = on; SET enable_indexscan = off; 
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
EXPLAIN ANALYZE SELECT * FROM r WHERE b=9 AND c=10;
                                                     QUERY PLAN                                                      
---------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on r  (cost=32.07..3070.25 rows=1136 width=32) (actual time=0.424..4.270 rows=449 loops=1)
   Recheck Cond: ((c = 10) AND (b = 9))
   Heap Blocks: exact=431
   ->  Bitmap Index Scan on cb_idx  (cost=0.00..31.79 rows=1136 width=0) (actual time=0.274..0.274 rows=449 loops=1)
         Index Cond: ((c = 10) AND (b = 9))
 Planning time: 1.232 ms
 Execution time: 4.413 ms
(7 rows)

SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |            431 |             0 |             5 |            0
(1 row)

-- ---------------------------------Q4
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = on; SET enable_indexscan = off; 
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index cb_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE b=9 AND c=10;
                                                           QUERY PLAN                                                           
--------------------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on r  (cost=1351.03..4389.21 rows=1136 width=32) (actual time=29.133..33.099 rows=449 loops=1)
   Recheck Cond: ((b = 9) AND (c = 10))
   Heap Blocks: exact=431
   ->  BitmapAnd  (cost=1351.03..1351.03 rows=1136 width=0) (actual time=28.939..28.939 rows=0 loops=1)
         ->  Bitmap Index Scan on b_idx  (cost=0.00..422.79 rows=22715 width=0) (actual time=4.450..4.450 rows=10000 loops=1)
               Index Cond: (b = 9)
         ->  Bitmap Index Scan on c_idx  (cost=0.00..927.42 rows=50000 width=0) (actual time=21.676..21.676 rows=50000 loops=1)
               Index Cond: (c = 10)
 Planning time: 0.721 ms
 Execution time: 33.248 ms
(10 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |            431 |             0 |           169 |            0
(1 row)

-- ---------------------------------Q5
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = off; SET enable_indexscan = on; 
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index cb_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE b=9 AND c>0;
                                                      QUERY PLAN                                                      
----------------------------------------------------------------------------------------------------------------------
 Index Scan using b_idx on r  (cost=0.42..30012.84 rows=22715 width=32) (actual time=0.051..48.792 rows=9524 loops=1)
   Index Cond: (b = 9)
   Filter: (c > 0)
   Rows Removed by Filter: 476
 Planning time: 0.849 ms
 Execution time: 50.819 ms
(6 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           5468 |             1 |            33 |            0
(1 row)

-- ---------------------------------Q5
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = on; SET enable_indexscan = off;
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index b_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE b=9 AND c>0;
                                                          QUERY PLAN                                                          
------------------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on r  (cost=25418.10..33111.83 rows=22715 width=32) (actual time=142.764..192.847 rows=9524 loops=1)
   Recheck Cond: ((c > 0) AND (b = 9))
   Heap Blocks: exact=5346
   ->  Bitmap Index Scan on cb_idx  (cost=0.00..25412.42 rows=22715 width=0) (actual time=140.250..140.250 rows=9524 loops=1)
         Index Cond: ((c > 0) AND (b = 9))
 Planning time: 1.401 ms
 Execution time: 194.780 ms
(7 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           5346 |             1 |          3645 |            2
(1 row)

-- ---------------------------------Q6
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = off; SET enable_indexscan = on;
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index cb_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE b>9 AND c=10;
                                                       QUERY PLAN                                                       
------------------------------------------------------------------------------------------------------------------------
 Index Scan using c_idx on r  (cost=0.42..30903.48 rows=28596 width=32) (actual time=0.115..102.068 rows=28544 loops=1)
   Index Cond: (c = 10)
   Filter: (b > 9)
   Rows Removed by Filter: 21456
 Planning time: 2.036 ms
 Execution time: 107.963 ms
(6 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7346 |             0 |           140 |            0
(1 row)

-- ---------------------------------Q6
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = on; SET enable_indexscan = off;
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index cb_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE b>9 AND c=10;
                                                        QUERY PLAN                                                        
--------------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on r  (cost=934.57..9037.57 rows=28596 width=32) (actual time=23.515..119.711 rows=28544 loops=1)
   Recheck Cond: (c = 10)
   Filter: (b > 9)
   Rows Removed by Filter: 21456
   Heap Blocks: exact=7346
   ->  Bitmap Index Scan on c_idx  (cost=0.00..927.42 rows=50000 width=0) (actual time=20.325..20.325 rows=50000 loops=1)
         Index Cond: (c = 10)
 Planning time: 0.725 ms
 Execution time: 125.036 ms
(9 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7346 |             0 |           139 |            0
(1 row)

-- ---------------------------------Q6
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = off; SET enable_indexscan = on;
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index cb_idx;
DROP INDEX
DROP index c_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE b>9 AND c=10;
                                                       QUERY PLAN                                                       
------------------------------------------------------------------------------------------------------------------------
 Index Scan using b_idx on r  (cost=0.42..47039.56 rows=28596 width=32) (actual time=0.123..763.238 rows=28544 loops=1)
   Index Cond: (b > 9)
   Filter: (c = 10)
   Rows Removed by Filter: 541456
 Planning time: 0.650 ms
 Execution time: 769.075 ms
(6 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7353 |        128087 |          1561 |            0
(1 row)

-- ---------------------------------Q6
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = on; SET enable_indexscan = off;
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index cb_idx;
DROP INDEX
DROP index c_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE b>9 AND c=10;
                                                           QUERY PLAN                                                           
--------------------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on r  (cost=10576.97..26508.77 rows=28596 width=32) (actual time=198.968..551.051 rows=28544 loops=1)
   Recheck Cond: (b > 9)
   Filter: (c = 10)
   Rows Removed by Filter: 541456
   Heap Blocks: exact=7353
   ->  Bitmap Index Scan on b_idx  (cost=0.00..10569.82 rows=571920 width=0) (actual time=195.740..195.740 rows=570000 loops=1)
         Index Cond: (b > 9)
 Planning time: 0.823 ms
 Execution time: 556.693 ms
(9 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7353 |             0 |          1561 |            0
(1 row)

-- ---------------------------------Q6
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = off; SET enable_indexscan = on;
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index cb_idx;
DROP INDEX
DROP index b_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE b>9 AND c=10;
                                                      QUERY PLAN                                                       
-----------------------------------------------------------------------------------------------------------------------
 Index Scan using c_idx on r  (cost=0.42..30903.48 rows=28596 width=32) (actual time=0.071..96.857 rows=28544 loops=1)
   Index Cond: (c = 10)
   Filter: (b > 9)
   Rows Removed by Filter: 21456
 Planning time: 1.162 ms
 Execution time: 102.325 ms
(6 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7346 |             0 |           140 |            0
(1 row)

-- ---------------------------------Q6
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = on; SET enable_indexscan = off;
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index cb_idx;
DROP INDEX
DROP index b_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE b>9 AND c=10;
                                                        QUERY PLAN                                                        
--------------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on r  (cost=934.57..9037.57 rows=28596 width=32) (actual time=28.051..125.948 rows=28544 loops=1)
   Recheck Cond: (c = 10)
   Filter: (b > 9)
   Rows Removed by Filter: 21456
   Heap Blocks: exact=7346
   ->  Bitmap Index Scan on c_idx  (cost=0.00..927.42 rows=50000 width=0) (actual time=24.863..24.863 rows=50000 loops=1)
         Index Cond: (c = 10)
 Planning time: 0.570 ms
 Execution time: 131.338 ms
(9 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7346 |             0 |           139 |            0
(1 row)

-- ---------------------------------Q6
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = off; SET enable_indexscan = on;
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index b_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE b>9 AND c=10;
                                                       QUERY PLAN                                                        
-------------------------------------------------------------------------------------------------------------------------
 Index Scan using cb_idx on r  (cost=0.42..30393.88 rows=28596 width=32) (actual time=0.070..107.637 rows=28544 loops=1)
   Index Cond: ((c = 10) AND (b > 9))
 Planning time: 1.557 ms
 Execution time: 113.104 ms
(4 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7346 |             0 |           139 |            0
(1 row)

-- ---------------------------------Q6
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = on; SET enable_indexscan = off;
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index b_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE b>9 AND c=10;
                                                        QUERY PLAN                                                         
---------------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on r  (cost=737.53..8519.47 rows=28596 width=32) (actual time=19.958..95.087 rows=28544 loops=1)
   Recheck Cond: ((c = 10) AND (b > 9))
   Heap Blocks: exact=7208
   ->  Bitmap Index Scan on cb_idx  (cost=0.00..730.38 rows=28596 width=0) (actual time=16.830..16.830 rows=28544 loops=1)
         Index Cond: ((c = 10) AND (b > 9))
 Planning time: 0.869 ms
 Execution time: 100.416 ms
(7 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7346 |             0 |           139 |            0
(1 row)

-- ---------------------------------Q6
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = off; SET enable_indexscan = on;
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index c_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE b>9 AND c=10;
                                                       QUERY PLAN                                                        
-------------------------------------------------------------------------------------------------------------------------
 Index Scan using cb_idx on r  (cost=0.42..30393.88 rows=28596 width=32) (actual time=0.071..104.883 rows=28544 loops=1)
   Index Cond: ((c = 10) AND (b > 9))
 Planning time: 1.804 ms
 Execution time: 110.430 ms
(4 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7208 |         17834 |           114 |            0
(1 row)

-- ---------------------------------Q6
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = on; SET enable_indexscan = off;
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = off;
SET
SET
BEGIN;
BEGIN
DROP index c_idx;
DROP INDEX
EXPLAIN ANALYZE SELECT * FROM r WHERE b>9 AND c=10;
                                                        QUERY PLAN                                                         
---------------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on r  (cost=737.53..8519.47 rows=28596 width=32) (actual time=23.176..98.307 rows=28544 loops=1)
   Recheck Cond: ((c = 10) AND (b > 9))
   Heap Blocks: exact=7208
   ->  Bitmap Index Scan on cb_idx  (cost=0.00..730.38 rows=28596 width=0) (actual time=20.033..20.033 rows=28544 loops=1)
         Index Cond: ((c = 10) AND (b > 9))
 Planning time: 1.355 ms
 Execution time: 103.642 ms
(7 rows)

ROLLBACK;
ROLLBACK
SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7208 |             0 |           113 |            0
(1 row)

-- ---------------------------------Q6
SELECT pg_stat_reset();
 pg_stat_reset 
---------------
 
(1 row)

SELECT dropdbbuffers('assign2');
 dropdbbuffers 
---------------
 t
(1 row)

SET enable_bitmapscan = off; SET enable_indexscan = off;
SET
SET
SET enable_indexonlyscan = off; SET enable_seqscan = on;
SET
SET
EXPLAIN ANALYZE SELECT * FROM r WHERE b>9 AND c=10;
                                                QUERY PLAN                                                
----------------------------------------------------------------------------------------------------------
 Seq Scan on r  (cost=0.00..22353.00 rows=28596 width=32) (actual time=0.054..551.045 rows=28544 loops=1)
   Filter: ((b > 9) AND (c = 10))
   Rows Removed by Filter: 971456
 Planning time: 1.655 ms
 Execution time: 556.652 ms
(5 rows)

SELECT pg_sleep(2);
 pg_sleep 
----------
 
(1 row)

SELECT relname, heap_blks_read, heap_blks_hit, idx_blks_read, idx_blks_hit FROM pg_statio_all_tables WHERE relname = 'r';
 relname | heap_blks_read | heap_blks_hit | idx_blks_read | idx_blks_hit 
---------+----------------+---------------+---------------+--------------
 r       |           7353 |             0 |             1 |            0
(1 row)

-----------------------------------End of file
